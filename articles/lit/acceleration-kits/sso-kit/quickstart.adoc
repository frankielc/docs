---
title: Quickstart
description: Step-by-step guide showing how to use SSO Kit in your application.
order: 100
---
:lit:
// tag::content[]

== Getting Started with SSO Kit (DRAFT)

=== Back-end

Follow the getting started guide. Nothing changes here.

=== Front-end

==== Authentication state

.frontend/stores/app-store.ts
[source,typescript]
----
import SingleSignOnData from 'Frontend/generated/dev/hilla/sso/starter/SingleSignOnData';

// All the data we need is already loaded in the Hilla global variable
authInfo = (window as any).Hilla.SSO as SingleSignOnData;
----

==== Login and logout buttons

As an example, add two buttons to the drawer footer, one to log in and another to log out. When logging out, it is important to invoke the `logout` function provided by Hilla to perform logout on the server. Then, load the SSO provider logout page.

.frontend/views/main-layout.ts
[source,typescript]
----
import { logout } from '@hilla/frontend';

<footer slot="drawer">
  ${appStore.authInfo.authenticated
    ? html`<vaadin-button @click="${this.signOut}">Sign out</vaadin-button>`
    : html`<vaadin-button @click="${this.signIn}">Sign in</vaadin-button>`
  }
</footer>

private signOut = async () => {
  await logout(); // logout on the server
  location.href = appStore.authInfo.logoutUrl!;
};

private signIn = () => {
  location.href = appStore.authInfo.loginUrl;
};
----

==== Protect routes

Replace the `component` property with a conditional action:

.frontend/routes.ts
[source,typescript]
----
import { appStore } from './stores/app-store';

{
  path: 'hello',
  icon: 'la la-globe',
  title: 'Hello World',
  action: async (_context, command) => {
    return appStore.authInfo.authenticated ? command.component('hello-world-view') : null;
  },
},
----

==== Filter views in menu

Add a condition to the view filter in the layout:

.frontend/views/main-layout.ts
[source,typescript]
----
return views.filter((route) => route.title && (route.component || appStore.authInfo.authenticated)) as RouteInfo[];
----

==== Show user information

Add the user name in the `Hello` page. Use the Endpoint that provides user information or create your own to customize the returned data.

.frontend/views/helloworld/hello-world-view.ts
[source,typescript]
----
import User from 'Frontend/generated/dev/hilla/sso/endpoint/User';
import { UserEndpoint } from 'Frontend/generated/endpoints';
import { property } from 'lit/decorators.js';

// add a property for the user
@property()
user: User | undefined;

// load the user
async connectedCallback() {
  // ...
  this.user = await UserEndpoint.getAuthenticatedUser();
}

// show something in the rendered html
${this.user && html`Connected user: ${this.user.fullName}`}
----

==== Back-channel logout

Add property and push support on the server.

In case the user doesn't want to log in again, state must be cleared on the client. Define a function for that:

.frontend/stores/app-store.ts
[source,typescript]
----
clearAuthInfo() {
  this.authInfo = {
    ...this.authInfo,
    authenticated: false,
    backChannelLogoutEnabled: false,
    logoutUrl: undefined,
    roles: [],
  };
}
----

In the application layout, subscribe to back-channel logout events and show a dialog when received:

.frontend/views/main-layout.ts
[source,typescript]
----
import '@vaadin/confirm-dialog';
import { BackChannelLogoutEndpoint } from 'Frontend/generated/endpoints';
import { property } from 'lit/decorators.js';

@property()
loggedOut = false;

connectedCallback() {
  // ...
  if (appStore.authInfo.authenticated && appStore.authInfo.backChannelLogoutEnabled) {
    BackChannelLogoutEndpoint.subscribe().onNext(() => this.loggedOut = true);
  }
}

// add a dialog to the existing render function
render() {
  return html`
    ...
    <vaadin-confirm-dialog
      header="Logged out"
      cancel-button-visible
      @confirm="${this.loginAgain}"
      @cancel="${this.stayOnPage}"
      .opened="${this.loggedOut}"
    >
      <p>You have been logged out. Do you want to log in again?</p>
    </vaadin-confirm-dialog>
    ...
  `;
}

private loginAgain = async () => {
  await logout(); // logout on the server
  location.href = appStore.authInfo.loginUrl; // redirect to login page
};

private stayOnPage = async () => {
  await logout(); // logout on the server
  appStore.clearAuthInfo(); // clear authentication information on the client
};
----
